<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="stylesheet" href="/servable/static/css/photochop.css">
    <title>Photochop</title>
    <meta charset="utf-8" />
    <script type="text/javascript">
        var index = 0;
        var count;
        var img;
        var session;
        
        // displays the next image or if on last image redirects to download page
        function nextImg() {
            index++;
            if (index >= count) {
                window.location = 'DownloadPage.html?s=' + session + '&c=' + count;
                return;
            }
            img.src = "/File" + index + '/' + session;
          

        }

        // displays the previous image
        function previousImg() {
            index--;
            if (index < 0) index++; // Do nothing -- Or possibly ask the user if they want to start over 
            else 
            {
                img.src = "/File" + index + '/' + session;
            
            }
        }
        window.onload = function () {
            session = window.location.href;
            var ix1 = session.indexOf("?s=") + 3;
            var ix2 = session.indexOf("&c=");
            // get the session and image count
            count = parseInt(session.substring(ix2 + 3));
            session = session.substring(ix1, ix2);

            // display the first image for the session
            img = document.getElementById('image');
            img.src = "/File" + index + '/' + session;
            img.removeAttribute('hidden');

            wrap = document.getElementById('wrap');
            wrap.style.width = img.style.width;

            // add the button listeners
            document.getElementById('next').addEventListener('click', nextImg);
            document.getElementById('back').addEventListener('click', previousImg);

        }
    </script>
</head>
<body>
    <h1 style="margin: 0 auto;">Your Image</h1>
    <br /><br />
    <section>
        <!-- Image displayed for cropping -->
        <div id="wrap" style="width:0px">
            <img id="image" hidden src="">
            <div id ="cropArea" hidden style="top:0px;left:0px;width:100px;height:100px"></div>
        </div>
        <!-- Button for navigation-->
        <img id="next" src="../static/images/next-btn.png" />
        <img id="back" src="../static/images/back-btn.png" />        
    </section>
        <!-- Buttons for crop selection -->
    <section>
        <button id="ruleOfThirds">RULE OF THIRDS</button>
        <button id="mostColorfulArea">MOST COLORFUL AREA</button>
        <button id="mostInterestingArea">MOST INTERESTING AREA</button>
    </section>
</body>
</html>